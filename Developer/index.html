<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Brief overview - Unofficial iRODS Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Brief overview";
        var mkdocs_page_input_path = "Developer.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Unofficial iRODS Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../About/">About</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Database</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Database_tuning/">Tuning</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developer</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Brief overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#general-tips">General Tips:</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#custom-plugins">Custom plugins</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../PythonAPI/">Python API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">System Administration</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Containerisation/">Containerisation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Sysadmin/">General Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Server_setup/">Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Queries/">Usefull Queries</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">User / Client notes</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../User/">User Notes</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Unofficial iRODS Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Developer &raquo;</li>
      <li>Brief overview</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="making-changes-to-the-core-project">Making changes to the core project</h1>
<p>(Copied from <a href="https://github.com/irods/irods/issues/6471">6471</a> )</p>
<p>If you're trying to make changes to the server, it is going to require additional steps.</p>
<p>Here is a quick breakdown of some of the most important directories:</p>
<pre><code>lib/api/src: Client-side API functions (basically wrappers around procApiRequest)
lib/core/src: Code that is used on the client-side and server-side
server/api/src: Server-side API endpoint implementations
server/core/src: Server-side utilities, main server startup logic, etc.
plugins/database/src: Database specific logic (db_plugin.cpp)
</code></pre>
<h2 id="general-tips">General Tips:</h2>
<pre><code>Functions with an rc prefix represent client-side APIs
    These calls invoke policy
Functions with an rs prefix represent server-side APIs
    These calls do not invoke policy
    Functions with a leading underscore are meant for server-side use only
The entry point for the server (startup, delay server forking, etc) can be found in rodsServer.cpp
The agent factory logic can be found in rodsAgent.cpp
When adding a new file to the server, it will require updating one or more CMakeLists.txt files
    Start with the CMakeLists.txt file located at the root of the repo. That file will help in understanding the structure of the project
An easy way to see if your change is being compiled into the server is by adding a log message to rsDataObjPut() and then invoking iput. If everything compiles, then you should see your log message in the log file
Last but not least, we highly recommend compiling and installing all of the packages produced by the https://github.com/irods/irods_development_environment. Doing so avoids weird situations around ABI, etc.
</code></pre>
<h2 id="custom-plugins">Custom plugins</h2>
<p>(Taken from <a href="https://github.com/irods/irods/issues/6458">#6458</a>)</p>
<p>Calling a rule defined in a custom plugin (a .so file) which is defined in the server conf with a particular <code>instance_name</code>.</p>
<p>To make this work, your plugin must implement exec_rule_text(). You can use the Logical Quotas REP as a reference for achieving this. See the following:</p>
<pre><code>https://github.com/irods/irods_rule_engine_plugin_logical_quotas/blob/df75c52f6d8aa89a2b452aeb56626c2f944b5986/src/main.cpp#L360
https://github.com/irods/irods_rule_engine_plugin_logical_quotas/blob/df75c52f6d8aa89a2b452aeb56626c2f944b5986/src/main.cpp#L331
https://github.com/irods/irods_rule_engine_plugin_logical_quotas/blob/df75c52f6d8aa89a2b452aeb56626c2f944b5986/src/main.cpp#L220
</code></pre>
<p>If you want to invoke rules within your plugin from a delay rule, you'll also need to implement exec_rule_expression(). The Logical Quotas REP supports both of these functions and demonstrates how someone can support these through a single function.</p>
<p>Keep in mind that the implementation for your plugin could be very different from the Logical Quotas implementation depending on how your plugin accepts input. Logical Quotas accepts JSON as input. If your plugin also accepts JSON, you should be able to use the same pattern as the Logical Quotas REP.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../Database_tuning/" class="btn btn-neutral float-left" title="Tuning"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../PythonAPI/" class="btn btn-neutral float-right" title="Python API">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../Database_tuning/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../PythonAPI/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
